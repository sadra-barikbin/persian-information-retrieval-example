شیراز بسال ۹۰۹ هجری (۱۵۰۳ میلادی) به دست صفویه افتاد. شاه اسماعیل در راه توسعه تشیع رهبران مذهبی اهل سنت شهر را از دم تیغ گذرانید. در این دوران بناهای متعددی در شیراز مانند مدرسه خان، قصری در محل «میدان» و حصاری بدور شهر ساخت. شهر شیراز در دوران صفویه دو گروه رقیب را در خود جای داده‌بود. حیدری‌ها که پیرو شیخ حیدر صفوی بودند و در شرق شهر سکنا داشتند و نعمتی‌ها که در غرب شیراز ساکن بودند و پیرو شاه نعمت‌الله ولی بودند.

پس از حمله افغان‌ها به ایران و سقوط صفویه در سال ۱۷۲۲ میلادی، سپاه افغان در سال ۱۷۲۳ روانه شیراز شد. شیراز پس از نه ماه محاصره و تحمل قحطی تسلیم شد. گفته می‌شود طی این محاصره حدود ۱۰۰ هزار تن از مردم شیراز هلاک شدند. نادرشاه توانست در سال ۱۷۲۹ شیراز را از دست افغان‌ها درآورد و خرابی‌های به بار آمده را ترمیم نماید. اما با شورش حکمرانان محلی در دوره افشاریان علیه نادر شاه، نادر شاه سپاهی را روانه شیراز کرد و شهر پس از چهار ماه محاصره سقوط کرد. پس از این حمله بسیاری از مردم شیراز از دم تیغ گذشتند و دو کله مناره در اطراف شهر برپا شد و باغ‌های اطراف شیراز نابود شد.

کریم خان زند شیراز را در سال ۱۱۸۰ هجری قمری (۷–۱۷۶۶ میلادی) به‌عنوان پایتخت سلطنت خود برگزید. در این دوران شیراز رونقی دوباره یافت و بر جمعیت آن افزوده‌شد. شیشه ساخت شیراز به تمام ایران صادر می‌شد و شراب شیراز که عمدتاً توسط ارمنیان و یهودیان ساخته می‌شد از طریق خلیج فارس به بازار هند صادر می‌شد. در دوره کریم خان استادکاران و کارگران از سراسر ایران به شیراز آورده شدند. گفته شده‌است که تنها ۱۲٬۰۰۰ تن در ساختن خندق جدید دور شهر شرکت داشتند. بدستور کریم خان بناهای متعددی مانند ارگ جدید شهر، بازار وکیل، دیوان‌خانه، توپخانه، یک مسجد باشکوه و چند هزار مسکن برای لرها که در سپاه کریم خان بودند بنا شد. در آن زمان شیراز یازده بخش داشت که پنج تای آن‌ها بخش‌های حیدری، پنج تای آن‌ها نعمتی و یک بخش متعلق به یهودیان بود. پس از کریم خان، جانشینان وی موفق به حفظ سلسله زندیه نشدند و پس از روی کار آمدن قاجارها، آقا محمد خان قاجار پایتخت را به تهران منتقل نمود. در دوره قاجاریه، سید علی محمد باب در سال ۱۲۶۱ هجری قمری (۱۸۴۵ میلادی) در شهر شیراز شروع تبلیغ آیین خود نمود. او دستگیر و از شهر اخراج شد. در زمان اشغال ایران در جنگ جهانی اول، شیراز از کانون‌های مبارزه با نیروهای خارجی بود و کمیته ملی حافظین استقلال ایران در این شهر فعالیت می‌کرد.