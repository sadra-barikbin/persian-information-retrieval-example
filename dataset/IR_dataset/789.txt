در ۱۷۷۹ م، آقامحمدخان پس از سال‌ها رو به سوی زادگاه خود نهاد. او در راه در ورامین با قاجارهای دولو ملاقات کرد و به اختلافات گذشته پایان داد. سپس به زیارت حرم عبدالعظیم حسنی، جایی که سر پدرش مدفون بود، رفت و بعد وارد مازندران شد. نخستین کاری که نیاز داشت برای برقراری قدرت خود در مازندران انجام دهد، مطیع کردن قبایل قوانلو و برادران ناتنی‌اش بود. دو تن از برادرانش، رضاقلی و مرتضی‌قلی، حاضر نشدند که برتری او را بپذیرند و در همان ابتدا نبردی درگرفت. آقامحمدخان آن‌ها را دور زد و وارد مازندران شد. مرتضی‌قلی به استرآباد عقب نشست و جایگاه خود در آن منطقه را مستحکم کرد. آقامحمدخان نمی‌توانست علیه مرتضی‌قلی لشکرکشی کند؛ زیرا مادر او دولو بود و این درگیری می‌توانست اتحاد شکننده‌ای که میان قبایل قاجار ایجاد کرده بود را از بین ببرد.

در ۱۷۸۱ م، موضوع جدیدی روی داد که تمرکز آقامحمدخان را به خود جلب کرد. علی‌مرادخان زند سپاهی متشکل از نیروهای زند و قبایل افغان به رهبری محمودخان، پسر آزادخان افغان را برای سرکوب آقامحمدخان راهی مازندران کرده بود. خان قاجار برادر خود، جعفرقلی را به فرماندهی نیروهای قبایل قاجاری منصوب کرد. دو لشکر با یکدیگر روبرو شدند و در آخر کار، قاجارها توانستند آن‌ها را عقب برانند. موقعیت آقامحمدخان در مازندران به صورت موقتی، مستحکم شده بود. او بارفروش (بابل امروزی) را مرکز قدرت خود کرد و فتحعلی و حسین‌قلی، فرزندان برادرش جهانسوز را زیر پر و بال خود گرفت؛ از همان زمان علاقهٔ او نسبت به فتحعلی آشکار بود. رضاقلی، برادر خان قاجار، سپاهی از نیروهای لاهیجانی گرد آورد و به بارفروش تاخت. او موفق شد آقامحمدخان را دستگیر کند. خبر که استرآباد رسید، دیگر برادر آقامحمدخان نیروهای قجری و ترکمن را جمع‌آوری کرد و به ساری حمله کرده و آقامحمدخان را آزاد کرد. رضاقلی و آقامحمدخان آشتی کردند اما او هنوز راضی نبود؛ نتیجتاً، به اصفهان گریخت و از زندیان، ابتدا علی‌مرادخان و سپس صادق‌خان، درخواست کمک کرد و چون هیچ‌کدام به او یاری نرساندند، به خراسان گریخت و مدتی بعد همان‌جا مرد. پس از مرگ رضاقلی، هوادارانش به آقامحمدخان پیوستند و در نبرد علیه مرتضی‌قلی که درحال آماده شدن برای حمله به مازندران بود، جنگیدند. پس از چند برخورد، آقامحمدخان پذیرفت به صورت دوفاکتو مرتضی‌قلی را به حاکمیت استرآباد منصوب کند.