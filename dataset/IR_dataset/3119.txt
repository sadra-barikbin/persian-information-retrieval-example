در قرن چهارم هجری اکثر مناطق ایران زمین به دین اسلام درآمده‌بودند؛ ولی در طبرستان و گیلان وضع متفاوت بود. مردم این نواحی هنوز به دیانت زرتشتی وفادار بودند. چون تا آن زمان حاکمان مسلمان نتوانسته بودند بر این مناطق چیره شوند، نوعی آزادی دینی و سیاسی در منطقه حاکم بود. بخشی از مردم تحت تأثیر علویان زیدی، که از دست خلفا به منطقه می‌گریختند، به مذهب تشیع گرویدند و تا قرون چهارم و پنجم هجری هنوز نیمی از مردم زرتشتی بودند و نیمی دیگر شیعه شده‌بودند.

در اواسط قرن سوم هجری خلافت عباسی با جنبش‌های استقلال‌طلبانه‌ای مواجه شد که ضعف سیاسی او را در پی داشت. این جنبش‌ها در میان ایرانیان، که از پیش منتظر فرصتی برای شورش بودند، با ظهور دولت‌های سامانیان، صفاریان و زیاریان، به اوج رسید. همچنین اوایل قرن چهارم هجری در شمال ایران جنبش‌های گوناگونی علیه خلیفه آغاز شد که اسفار بن شیرویه، ماکان کاکی، مرداویج و آل بویه از این دسته‌اند. البته مقام خلیفه در سرزمین‌های سنی مذهب هنوز قداست و احترام گذشتهٔ خود را حفظ کرده‌بود و دولت‌ها مجبور به پذیرش خلافت بودند تا مقام خود را مشروعیت بخشند.

بزرگترین دشمنان خلیفه در این زمان علویان شیعه بودند که ادعای خلافت می‌کردند. در طبرستان و دیلم زیدیان طرفداران بسیاری یافتند ولی پس از دو یا سه نسل علویان طبرستان و گیلان از شعارهای عدالت‌طلبانهٔ نخستین خود عدول کرده و به کنار رانده شدند. این اوضاع زمینه را برای قیام اشرافی که نسب خود را به ساسانیان می‌رساندند، فراهم نمود و در این منطقه نیاز به حکومتی بود که دو قشر شیعیان و زرتشتیان را اقناع کند. مرداویج در این هنگام با ماهیتی دینی (مخالفت با مذهب خلیفه) و سیاسی (بازگشت به جامعه ایران باستان) قیام کرد. وی متناسب با پیشرفت کشورگشایی‌هایش تغییر هویت داده و افکار تازه‌ای بروز می‌داد؛ چنانچه ابتدا واکنشی نسبت به اسلام نشان نمی‌داد ولی پس از مدتی جامهٔ سیاه عباسی پوشید و بعدتر علیه عباسیان شورش کرد.