چون علی مردان خان و آزادخان از میان رفتند، تاج و تخت ایران دو مدعی معتبر دیگر بیشتر نداشت، یکی محمد حسن خان قاجار که بر سواحل خزر و شمال ایران تا اصفهان مستولی بود و دیگری خان زند که بر فارس و قسمتی از ایران غربی حکم داشت.

در سال ۱۱۷۱ محمد حسن خان برای از میان بردن رقیب به شیراز لشکر کشید و آن جا را در محاصره گرفت. کریم خان بر اثر مساعدت مردم و شجاعت‌های شیخ علی خان زند اردوی قاجار را بالاخره از پا درآورد و محمد حسن خان مغلوب و به اصفهان برگشت و چون به علت بدرفتاری کسان او به مردم این شهر، اقامت در آنجا را نیز مشکل دید به مازندران رفت و کریم خان با پیروزی تمام به اصفهان وارد گردید و چون می‌خواست کار محمد حسن خان را یکسره کند، فارس را به برادر خود صادق خان زند سپرد و از اصفهان به تهران آمد و از آنجا شیخ علی خان را روانه مازندران کرد.

شیخ علی خان در ورود به مازندران با طایفهٔ دیگر قاجاریه که نسبت به ایل تابع محمد حسن خان کینهٔ دیرینه داشتند، دست یکی کرد و از ایشان حسن خان دولو را که سابقاً از جانب محمد حسن خان حاکم اصفهان بود به خدمت خود آورد و به یاری ایشان در نزدیکی اشرف با محمد حسن خان روبرو شد، ولی از این جنگ نتیجه‌ای بدست نیامد و شیخ علی خان از آنجا به فتح استرآباد، محمد حسن خان به عجله خود را به آن شهر رساند، اما در این محل شکست خورد و به مازندران گریخت و در این دیار موقعی که می‌خواست از پلی بگذرد اسبش در غلتید و از قاجاریهٔ مخالف که در عقب او بود، حسن خان دولو بر او حمله برد و سر او را جدا کرده پیش شیخ علی خان فرستاد و شیخ علی خان هم آن را به تهران نزد کریم خان فرستاد.

پس از قتل محمد حسن خان قاجار، کسان طایفه و پسر مهتر او آغا محمدخان از ترس دشمنان خانوادگی به صحرای یموت نزد ترکمنان پناه جستند، ولی پس از چهار سال به پناه کریم خان آمدند و خان زند همه را در کنف حمایت خود گرفت.